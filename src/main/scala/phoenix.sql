--行程表
create table if not exists "MAPBARTRAVEL"(
"DAYHOUR" VARCHAR NOT NULL,
"YEAR" VARCHAR NOT NULL,
"LONLAT" VARCHAR NOT NULL,
"TERNIMATED" VARCHAR NOT NULL,
"ROUTEID" VARCHAR NOT NULL,
"CARTRACK"."LONLAT" VARCHAR,
"CARTRACK"."KICATTIME" VARCHAR,
"CARTRACK"."SPEED" VARCHAR,
"CARTRACK"."HDOP" VARCHAR,
"CARTRACK"."DIRE" VARCHAR,
"CARTRACK"."ALTIUDE" VARCHAR,
"CARTRACK"."ROADID" VARCHAR,
"CARTRAVEL"."NAME" VARCHAR,
"CARTRAVEL"."DISTANCE" VARCHAR,
"CARTRAVEL"."TIME" VARCHAR,
"CARTRAVEL"."AVGSPEED" VARCHAR,
"CARTRAVEL"."MAXSPEED" VARCHAR,
"CARTRAVEL"."UPSPEED" VARCHAR,
"CARTRAVEL"."BRAKTIMES" VARCHAR,
"CARTRAVEL"."NOST" VARCHAR,
"CARTRAVEL"."NOA" VARCHAR,
"ORIGINALDATA"."ROUTEID" VARCHAR,
constraint dos_pk primary key("DAYHOUR", "YEAR", "LONLAT", "TERNIMATED", "ROUTEID")
)SPLIT ON ('0108','0116','0123','0208','0216','0223','0308','0316','0323','0408','0416','0423','0508','0516','0523','0608','0616','0623','0708','0716','0723','0808','0816','0823','0908','0916','0923','1008','1016','1023','1108','1116','1123','1208','1216','1223','1308','1316','1323','1408','1416','1423','1508','1516','1523','1608','1616','1623','1708','1716','1723','1808','1816','1823','1908','1916','1923','2008','2016','2023','2108','2116','2123','2208','2216','2223','2308','2316','2323','2408','2416','2423','2508','2516','2523','2608','2616','2623','2708','2716','2723','2808','2816','2823','2908','2916','2923','3008','3016','3023','3108','3116','3123');

--索引表
CREATE INDEX "MAPBARTRAVELINDEX" ON "MAPBARTRAVEL"("DAYHOUR", "YEAR", "LONLAT", "TERNIMATED", "ROUTEID") INCLUDE("CARTRACK"."ROADID") SPLIT ON ('0108','0116','0123','0208','0216','0223','0308','0316','0323','0408','0416','0423','0508','0516','0523','0608','0616','0623','0708','0716','0723','0808','0816','0823','0908','0916','0923','1008','1016','1023','1108','1116','1123','1208','1216','1223','1308','1316','1323','1408','1416','1423','1508','1516','1523','1608','1616','1623','1708','1716','1723','1808','1816','1823','1908','1916','1923','2008','2016','2023','2108','2116','2123','2208','2216','2223','2308','2316','2323','2408','2416','2423','2508','2516','2523','2608','2616','2623','2708','2716','2723','2808','2816','2823','2908','2916','2923','3008','3016','3023','3108','3116','3123');

--路口代价hbase存储表
create table if not exists "CROSSROADPRICE"(
"INTERSECTIONID" INTEGER NOT NULL,
"ROADIDONE" INTEGER NOT NULL,
"ROADIDTWO" INTEGER NOT NULL,
"DAYHOUR" INTEGER NOT NULL,
"ROADPRICE"."TIME" DOUBLE,
constraint dos_pk primary key("INTERSECTIONID","ROADIDONE", "ROADIDTWO", "DAYHOUR"));

--路况数据表
create table if not exists "TRAFFICDATA"(
"ROADID" VARCHAR NOT NULL,
"TRAFFICTIME" VARCHAR NOT NULL,
"TRAFFIC"."CF1" VARCHAR,
"TRAFFIC"."CF2" VARCHAR,
"TRAFFIC"."CF3" VARCHAR,
"TRAFFIC"."CF4" VARCHAR,
"TRAFFIC"."TRACKTIME" VARCHAR,
"TRAFFIC"."ROADID" VARCHAR,
constraint dos_pk primary key("ROADID","TRAFFICTIME"));

--通过Phoenix查询行程表信息
SELECT * FROM "MAPBARTRAVEL";
--通过Phoenix按照ROUTEID查询行程表信息
SELECT * FROM "MAPBARTRAVEL" WHERE "ROUTEID"='0R02';
--通过Phoeni按照ROADID查询行程表信息
SELECT * FROM "MAPBARTRAVEL" WHERE "ROADID"='0R22';
--通过Phoenix按照ROADID道路id进行模糊查询
SELECT * FROM "MAPBARTRAVEL" WHERE "ROADID" LIKE '%0r003%';
--通过Phoenix删除表中DAYHOUR对应数据
DELETE FROM "MAPBARTRAVEL" WHERE "DAYHOUR"='2510';
--通过Phoenix删除索引
DROP INDEX "MAPBARTRAVELINDEX" ON "MAPBARTRAVEL";
--通过Phoenix删除表
DROP TABLE "MAPBARTRAVEL";
--修改hbase列族压缩格式
alter 'MAPBARTRAVEL', NAME => 'CARTRACK', COMPRESSION => 'snappy';
alter 'MAPBARTRAVEL', NAME => 'CARTRAVEL', COMPRESSION => 'snappy';
alter 'MAPBARTRAVEL', NAME => 'ORIGINALDATA', COMPRESSION => 'snappy';
alter 'TRAFFICDATA', NAME => 'TRAFFIC', COMPRESSION => 'snappy';
alter 'CROSSROADPRICE', NAME => 'ROADPRICE', COMPRESSION => 'snappy';
--删除某一列族
disable 'MAPBARTRAVEL'
alter 'MAPBARTRAVEL', {NAME => 'TRAFFIC', METHOD => 'delete'}

